<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç¿»è¯‘åŠ©æ‰‹è®¾ç½®</title>
    <style>
        /* shadcn/ui inspired design system */
        :root {
            --background: 0 0% 100%;
            --foreground: 222.2 84% 4.9%;
            --card: 0 0% 100%;
            --card-foreground: 222.2 84% 4.9%;
            --popover: 0 0% 100%;
            --popover-foreground: 222.2 84% 4.9%;
            --primary: 221.2 83.2% 53.3%;
            --primary-foreground: 210 40% 98%;
            --secondary: 210 40% 96%;
            --secondary-foreground: 222.2 84% 4.9%;
            --muted: 210 40% 96%;
            --muted-foreground: 215.4 16.3% 46.9%;
            --accent: 210 40% 96%;
            --accent-foreground: 222.2 84% 4.9%;
            --destructive: 0 84.2% 60.2%;
            --destructive-foreground: 210 40% 98%;
            --border: 214.3 31.8% 91.4%;
            --input: 214.3 31.8% 91.4%;
            --ring: 221.2 83.2% 53.3%;
            --radius: 0.5rem;
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 24px;
            background: hsl(var(--muted) / 0.4);
            color: hsl(var(--foreground));
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .header h1 {
            font-size: 32px;
            font-weight: 700;
            color: hsl(var(--foreground));
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .header p {
            font-size: 16px;
            color: hsl(var(--muted-foreground));
            margin: 0;
        }
        
        .card {
            background: hsl(var(--card));
            border: 1px solid hsl(var(--border));
            border-radius: var(--radius);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }
        
        .card-header {
            padding: 24px 24px 0 24px;
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: hsl(var(--card-foreground));
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .card-description {
            font-size: 14px;
            color: hsl(var(--muted-foreground));
            margin: 0;
        }
        
        .card-content {
            padding: 24px;
        }
        
        .form-item {
            margin-bottom: 24px;
        }
        
        .form-item:last-child {
            margin-bottom: 0;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: hsl(var(--foreground));
            margin-bottom: 8px;
        }
        
        .slider-container {
            padding: 20px;
            background: hsl(var(--muted) / 0.3);
            border-radius: var(--radius);
            border: 1px solid hsl(var(--border));
        }
        
        .slider {
            width: 100%;
            height: 6px;
            margin: 16px 0;
            background: hsl(var(--border));
            border-radius: 3px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: hsl(var(--primary));
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        
        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: hsl(var(--primary));
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .value-display {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            color: hsl(var(--primary));
            margin: 16px 0;
            padding: 16px;
            background: hsl(var(--primary) / 0.1);
            border-radius: var(--radius);
            border: 1px solid hsl(var(--primary) / 0.2);
        }
        
        .button-group {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            cursor: pointer;
            padding: 10px 20px;
            gap: 8px;
            border: 1px solid transparent;
            min-height: 40px;
        }
        
        .btn-primary {
            background: hsl(var(--primary));
            color: hsl(var(--primary-foreground));
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .btn-primary:hover {
            background: hsl(var(--primary) / 0.9);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-secondary {
            background: hsl(var(--secondary));
            color: hsl(var(--secondary-foreground));
            border: 1px solid hsl(var(--border));
        }
        
        .btn-secondary:hover {
            background: hsl(var(--accent));
        }
        
        .btn-outline {
            background: transparent;
            color: hsl(var(--foreground));
            border: 1px solid hsl(var(--border));
        }
        
        .btn-outline:hover {
            background: hsl(var(--accent));
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
            min-height: 32px;
        }
        
        .quick-settings {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .alert {
            padding: 16px;
            border-radius: var(--radius);
            font-size: 14px;
            border: 1px solid;
            margin-top: 16px;
            display: none;
        }
        
        .alert.show {
            display: block;
        }
        
        .alert-info {
            background: hsl(214 100% 97%);
            color: hsl(214 84% 56%);
            border-color: hsl(214 100% 91%);
        }
        
        .alert-success {
            background: hsl(143 85% 96%);
            color: hsl(140 100% 27%);
            border-color: hsl(145 92% 91%);
        }
        
        .alert-error {
            background: hsl(0 93% 94%);
            color: hsl(0 84% 60%);
            border-color: hsl(0 93% 94%);
        }
        
        .icon {
            display: inline-block;
            vertical-align: middle;
        }
        
        /* Toggle Switch Styles */
        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .3s;
            border-radius: 24px;
        }
        
        .switch-slider:before {
            position: absolute;
            content: '';
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
        }
        
        input:checked + .switch-slider {
            background-color: hsl(var(--primary));
        }
        
        input:checked + .switch-slider:before {
            transform: translateX(24px);
        }
        
        /* Modal Dialog Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            animation: fadeIn 0.2s;
        }
        
        .modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-dialog {
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            animation: slideIn 0.3s;
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid hsl(var(--border));
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: hsl(var(--muted-foreground));
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background 0.2s;
        }
        
        .modal-close:hover {
            background: hsl(var(--muted));
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid hsl(var(--border));
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 640px) {
            body {
                padding: 16px;
            }
            
            .card-content {
                padding: 16px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <span class="icon">ğŸŒ</span>
                ç¿»è¯‘åŠ©æ‰‹è®¾ç½®
            </h1>
            <p>é…ç½®åˆ’è¯ç¿»è¯‘åŠŸèƒ½çš„æ˜¾ç¤ºæ—¶é—´å’Œè¡Œä¸º</p>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <span class="icon">â±ï¸</span>
                    æç¤ºæ˜¾ç¤ºæ—¶é—´
                </h2>
                <p class="card-description">
                    è®¾ç½®åˆ’è¯ç¿»è¯‘ç»“æœæç¤ºæ¡†çš„æ˜¾ç¤ºæ—¶é—´ï¼ˆ1-30ç§’ï¼‰
                </p>
            </div>
            <div class="card-content">
                <div class="form-item">
                    <label class="form-label" for="timeoutRange">æ˜¾ç¤ºæ—¶é—´</label>
                    <div class="slider-container">
                        <input type="range" id="timeoutRange" class="slider" min="1" max="30" value="10" step="1">
                        <div class="value-display" id="valueDisplay">10 ç§’</div>
                    </div>
                </div>
                
                <div class="form-item">
                    <label class="form-label">å¿«é€Ÿè®¾ç½®</label>
                    <div class="quick-settings">
                        <button class="btn btn-outline btn-sm quickBtn" data-seconds="3">3ç§’</button>
                        <button class="btn btn-outline btn-sm quickBtn" data-seconds="5">5ç§’</button>
                        <button class="btn btn-outline btn-sm quickBtn" data-seconds="10">10ç§’</button>
                        <button class="btn btn-outline btn-sm quickBtn" data-seconds="15">15ç§’</button>
                        <button class="btn btn-outline btn-sm quickBtn" data-seconds="30">30ç§’</button>
                    </div>
                </div>
                
                <div class="form-item">
                    <div class="button-group">
                        <button class="btn btn-primary" id="saveBtn">
                            <span class="icon">ğŸ’¾</span>
                            ä¿å­˜è®¾ç½®
                        </button>
                        <button class="btn btn-secondary" id="testBtn">
                            <span class="icon">ğŸ§ª</span>
                            æµ‹è¯•æ•ˆæœ
                        </button>
                        <button class="btn btn-outline" id="resetBtn">
                            <span class="icon">ğŸ”„</span>
                            é‡ç½®é»˜è®¤
                        </button>
                    </div>
                </div>
                
                <div id="statusArea" class="alert"></div>
            </div>
        </div>
        
        <!-- Translation Source Settings -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <span class="icon">ğŸ”„</span>
                    ç¿»è¯‘æºè®¾ç½®
                </h2>
                <p class="card-description">
                    é€‰æ‹©å¯ç”¨çš„ç¿»è¯‘æºï¼ˆå¯å¤šé€‰ï¼‰
                </p>
            </div>
            <div class="card-content">
                <div class="form-item">
                    <label class="form-label">å¯ç”¨ç¿»è¯‘æº</label>
                    <div style="padding: 16px; background: hsl(var(--muted) / 0.3); border-radius: var(--radius); border: 1px solid hsl(var(--border));">
                        <!-- Youdao Dictionary -->
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid hsl(var(--border));">
                            <div style="flex: 1;">
                                <label for="source-youdao-dict" style="cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" id="source-youdao-dict" checked style="margin-right: 12px; width: 18px; height: 18px; cursor: pointer;">
                                    <div>
                                        <div style="font-weight: 500; margin-bottom: 4px;">æœ‰é“è¯å…¸</div>
                                        <div style="font-size: 12px; color: hsl(var(--muted-foreground));">é€‚ç”¨äºå•è¯æŸ¥è¯¢ï¼Œæä¾›è¯¦ç»†é‡Šä¹‰å’ŒéŸ³æ ‡</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- Youdao Online Translate -->
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid hsl(var(--border));">
                            <div style="flex: 1;">
                                <label for="source-youdao-translate" style="cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" id="source-youdao-translate" checked style="margin-right: 12px; width: 18px; height: 18px; cursor: pointer;">
                                    <div>
                                        <div style="font-weight: 500; margin-bottom: 4px;">æœ‰é“åœ¨çº¿ç¿»è¯‘</div>
                                        <div style="font-size: 12px; color: hsl(var(--muted-foreground));">é€‚ç”¨äºç½‘ç»œè¯æ±‡å’Œè¯ç»„ç¿»è¯‘ï¼ˆè‡³å¤š2ä¸ªå•è¯ï¼‰</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <!-- iCiba Dictionary -->
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0;">
                            <div style="flex: 1;">
                                <label for="source-iciba" style="cursor: pointer; display: flex; align-items: center;">
                                    <input type="checkbox" id="source-iciba" style="margin-right: 12px; width: 18px; height: 18px; cursor: pointer;">
                                    <div>
                                        <div style="font-weight: 500; margin-bottom: 4px;">é‡‘å±±è¯éœ¸</div>
                                        <div style="font-size: 12px; color: hsl(var(--muted-foreground));">å¤‡ç”¨è¯å…¸æºï¼Œå½“æœ‰é“è¯å…¸æ— ç»“æœæ—¶ä½¿ç”¨</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-item">
                    <div class="button-group">
                        <button class="btn btn-primary" id="saveSourcesBtn">
                            <span class="icon">ğŸ’¾</span>
                            ä¿å­˜ç¿»è¯‘æºè®¾ç½®
                        </button>
                        <button class="btn btn-outline" id="resetSourcesBtn">
                            <span class="icon">ğŸ”„</span>
                            æ¢å¤é»˜è®¤
                        </button>
                    </div>
                </div>
                
                <div id="sourcesStatusArea" class="alert"></div>
            </div>
        </div>
        
        <!-- Keyboard Shortcut Settings -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <span class="icon">âŒ¨ï¸</span>
                    å¿«æ·é”®è®¾ç½®
                </h2>
                <p class="card-description">
                    è‡ªå®šä¹‰é“¾æ¥åˆ’è¯æŸ¥è¯çš„å¿«æ·é”®ï¼ˆé»˜è®¤ï¼šCtrl+Shift+Lï¼‰
                </p>
            </div>
            <div class="card-content">
                <div class="form-item">
                    <div style="padding: 16px; background: hsl(var(--muted) / 0.3); border-radius: var(--radius); border: 1px solid hsl(var(--border));">
                        <div style="display: flex; justify-content: space-between; align-items: center; gap: 16px;">
                            <div style="flex: 1;">
                                <p style="margin: 0 0 8px 0; font-weight: 500;">é“¾æ¥åˆ’è¯æŸ¥è¯å¿«æ·é”®</p>
                                <p style="margin: 0; font-size: 13px; color: hsl(var(--muted-foreground));">å½“å‰å¿«æ·é”®ï¼š<span id="currentShortcut" style="font-family: monospace; font-weight: 600; color: hsl(var(--primary));">Ctrl+Shift+L</span></p>
                                <p style="margin: 8px 0 0 0; font-size: 12px; color: hsl(var(--muted-foreground));">å¯ç”¨åå¯åœ¨é“¾æ¥ä¸Šè¿›è¡Œåˆ’è¯ç¿»è¯‘ï¼Œåˆ’è¯åè‡ªåŠ¨é€€å‡ºè¯¥æ¨¡å¼</p>
                            </div>
                            <button class="btn btn-primary" id="customizeShortcutBtn">
                                <span class="icon">âš™ï¸</span>
                                è‡ªå®šä¹‰å¿«æ·é”®
                            </button>
                        </div>
                    </div>
                </div>
                <div id="shortcutStatusArea" class="alert"></div>
            </div>
        </div>
        
        <!-- Word Recording Feature Section -->
        <div class="card">
            <div class="card-header">
            <h2 class="card-title">
                <span class="icon">ğŸ“</span>
                è¯æ±‡è®°å½•ç®¡ç†
            </h2>
            <p class="card-description">
                è‡ªåŠ¨è®°å½•æ‚¨æŸ¥è¯¢è¿‡çš„å•è¯ï¼Œæ”¯æŒå®šæ—¶æ¸…ç†å’Œå¯¼å‡ºåŠŸèƒ½
            </p>
        </div>
        <div class="card-content">
            <!-- Feature Toggle Switch -->
            <div class="form-item" style="padding: 16px; background: hsl(var(--muted) / 0.3); border-radius: var(--radius); border: 1px solid hsl(var(--border)); margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <label class="form-label" style="margin: 0; font-weight: 600;">å¯ç”¨è¯æ±‡è®°å½•åŠŸèƒ½</label>
                        <p style="margin: 4px 0 0 0; font-size: 12px; color: hsl(var(--muted-foreground));">è‡ªåŠ¨è®°å½•æ‚¨æŸ¥è¯¢çš„å•è¯ï¼Œæ–¹ä¾¿åç»­å¤ä¹ </p>
                    </div>
                    <label style="position: relative; display: inline-block; width: 48px; height: 24px;">
                        <input type="checkbox" id="wordRecordingToggle" style="opacity: 0; width: 0; height: 0;">
                        <span class="switch-slider"></span>
                    </label>
                </div>
            </div>
            
            <div id="wordRecordingSettings" style="opacity: 1; transition: opacity 0.3s;">
            <div class="form-item">
                <label class="form-label">è‡ªåŠ¨æ¸…ç†æ—¶é—´</label>
                <div class="button-group">
                    <button class="btn btn-outline word-retention-btn" data-days="15">15å¤©</button>
                    <button class="btn btn-primary word-retention-btn" data-days="30">30å¤©</button>
                    <button class="btn btn-outline word-retention-btn" data-days="90">90å¤©</button>
                    <button class="btn btn-outline word-retention-btn" data-days="180">180å¤©</button>
                </div>
                <p class="form-description" style="margin-top: 8px; color: hsl(var(--muted-foreground)); font-size: 12px;">
                    å½“å‰è®¾ç½®ï¼š<span id="currentRetention">30å¤©</span> - è¶…è¿‡æ­¤æ—¶é—´çš„è®°å½•å°†è¢«è‡ªåŠ¨æ¸…ç†
                </p>
            </div>
            
            <div class="form-item">
                <label class="form-label">è¯æ±‡ç»Ÿè®¡</label>
                <div class="stats-container" style="padding: 16px; background: hsl(var(--muted) / 0.3); border-radius: var(--radius); border: 1px solid hsl(var(--border));">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 24px; font-weight: bold; color: hsl(var(--primary));">
                                <span id="wordCount" style="font-size: 24px;">0</span>
                            </div>
                            <div style="font-size: 12px; color: hsl(var(--muted-foreground)); margin-top: 4px;">å·²è®°å½•å•è¯æ•°</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 14px; color: hsl(var(--foreground));">æœ€æ—©è®°å½•ï¼š<span id="oldestWord">--</span></div>
                            <div style="font-size: 14px; color: hsl(var(--foreground)); margin-top: 4px;">æœ€æ–°è®°å½•ï¼š<span id="newestWord">--</span></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="form-item">
                <label class="form-label">æ“ä½œ</label>
                <div class="button-group">
                    <button class="btn btn-primary" id="exportBtn">
                        <span class="icon">ğŸ’¾</span>
                        å¯¼å‡ºè¯æ±‡
                    </button>
                    <button class="btn btn-primary" id="importBtn">
                        <span class="icon">ğŸ“¥</span>
                        å¯¼å…¥è¯æ±‡
                    </button>
                    <button class="btn btn-secondary" id="viewWordsBtn">
                        <span class="icon">ğŸ‘ï¸</span>
                        æŸ¥çœ‹è¯æ±‡
                    </button>
                    <button class="btn btn-outline" id="clearWordsBtn" style="border-color: hsl(var(--destructive)); color: hsl(var(--destructive));">
                        <span class="icon">ğŸ—‘ï¸</span>
                        æ¸…ç©ºæ‰€æœ‰è®°å½•
                    </button>
                </div>
                <!-- Hidden file input for import -->
                <input type="file" id="importFileInput" accept=".txt,.json" style="display: none;">
            </div>
            
            <!-- Words Preview Modal (hidden by default) -->
            <div id="wordsPreview" class="form-item" style="display: none;">
                <label class="form-label">è¯æ±‡åˆ—è¡¨é¢„è§ˆ</label>
                <div style="padding: 16px; background: hsl(var(--muted) / 0.3); border-radius: var(--radius); border: 1px solid hsl(var(--border)); max-height: 300px; overflow-y: auto;">
                    <pre id="wordsPreviewContent" style="margin: 0; font-family: monospace; font-size: 14px; white-space: pre-wrap; word-break: break-word;">åŠ è½½ä¸­...</pre>
                </div>
            </div>
            
            <div id="wordStatusArea" class="alert"></div>
            </div>
        </div>
    </div>
    
    <!-- Modal Dialog Container -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal-dialog">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Title</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                Content
            </div>
            <div class="modal-footer" id="modalFooter">
                <button class="btn btn-outline" id="modalCancel">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="modalConfirm">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script src="../scripts/simple_options.js"></script>
    <script src="../scripts/word_recorder.js"></script>
</body>
</html>
